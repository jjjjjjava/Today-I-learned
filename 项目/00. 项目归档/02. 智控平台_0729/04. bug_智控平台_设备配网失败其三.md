[toc]

## 01.功能概述

- **[优先级] **
  - [ ] ⚠️ 阻断 (Blocker)：系统崩溃、核心功能完全不可用
  - [ ] 🔴 严重 (Critical)：核心功能受损，无可用替代方案
  - [ ] 🟠 高 (High)：主要功能受影响，但有临时解决方案
  - [ ] 🟡 中 (Medium)：次要功能问题，影响用户体验
  - [ ] 🟢 低 (Low)：界面问题或轻微异常，不影响功能
- **问题简要描述**
  - **Bug ID**：`BUG-20240709-001`  
  - **影响版本**：v
  - **提交人**：@panruiqi
  - **状态**：
    - [ ] ⌛ 修复中 /
    - [ ] ✅ 已解决 / 
    - [ ] ❌ 无法复现  

- **问题现象**
  - 成功连接到该设备，但是wifi配置失败了
- **环境特征**
  - 

## 02.问题分析

### 2.1 日志分析

- ![image-20250718182719779](../../_pic_/image-20250718182719779.png)

- ![image-20250718185041753](../../_pic_/image-20250718185041753.png)

### 2.2 根本原因推理

- 

## 03.代码分析

### 3.1 关联代码路径

- 

### 3.2 可疑修改点

- 

## 04.复现步骤

```

```



## 05.解决方案尝试

### 5.1 第一次解决方案

- 分析：
  - ![image-20250718185101802](../../_pic_/image-20250718185101802.png)
  - 看到这个了吗？GATT错误133 (0x85),他有以下几种可能的原因
  - ![image-20250718185214355](../../_pic_/image-20250718185214355.png)
- 解决方案：
  - 尝试不同更多安全模式
  - ![image-20250718183058393](../../_pic_/image-20250718183058393.png)
  - 延迟1s确保会话被正确建立
  - ![image-20250718183214438](../../_pic_/image-20250718183214438.png)
- 结果：
  - 仍然显示unregistered

### 5.2 第二次解决方案

- 分析：
  - ![image-20250718184426110](../../_pic_/image-20250718184426110.png)
  - ![image-20250718183508955](../../_pic_/image-20250718183508955.png)
  - 她其实是配置成功了，只是ESP32配置成功后会主动断开蓝牙连接，重启去连接懂啊配置的wifi网络
    - ![image-20250718184438994](../../_pic_/image-20250718184438994.png)
- 解决方案：
  - 无需解决
- 结果：
  - ![image-20250718185517700](../../_pic_/image-20250718185517700.png)
  - ![image-20250718185537989](../../_pic_/image-20250718185537989.png)
  - 

### 5.3 第三次解决方案

- 分析：
  - 
- 解决方案：
  - 
- 结果：
  - 

### 5.4 第四次解决方案

- 分析：
  - 
- 解决方法：
  - 
- 结果：
  - 

### 5.4 第五次解决方案

- 分析：
  - 
- 解决方案：
  - 
- 结果：成功解决问题



## 06.进一步思考

### 6.1 有没有其他更优雅的方案

- 这种存在一个问题：

### 6.2 推荐方案

```

```



## 07.根本原因和修复

### 7.1 最终定位

- 


### 7.2 修复方案



## 08.经验总结

### 8.1 技术原理

### 8.2 预防措施

### 8.3 卸载规范

### 8.4 调试技巧



